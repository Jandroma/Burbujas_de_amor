<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Rompeburbuja de Amor</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; font-family: sans-serif; }
    canvas { background: linear-gradient(to bottom, #ffdee9, #b5fffc); display: block; margin: 0 auto; }
    #controls {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 120px;
      background: rgba(255, 255, 255, 0.2);
      display: flex;
      justify-content: space-around;
      align-items: center;
    }
    .btn {
      width: 60px; height: 60px;
      border-radius: 50%;
      border: none;
      background-color: #ff5e8e;
      color: white;
      font-size: 20px;
    }
    #scoreboard {
      position: absolute;
      top: 10px; left: 10px;
      background: rgba(0,0,0,0.4);
      color: white;
      padding: 10px;
      border-radius: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <canvas id="game"></canvas>
  <div id="controls">
    <button class="btn" id="left">‚óÄÔ∏è</button>
    <button class="btn" id="up">üîº</button>
    <button class="btn" id="right">‚ñ∂Ô∏è</button>
    <button class="btn" id="shoot">‚ù§Ô∏è</button>
  </div>
  <div id="scoreboard">Puntos: 0 | Letras: <span id="letters">_ _ _ _</span></div>  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight - 120;

    const player = { x: canvas.width/2, y: canvas.height/2, vx: 0, vy: 0, size: 40 };
    const keys = { left: false, right: false, up: false };
    const bullets = [];
    const letters = [];
    let score = 0;
    const needed = "√ÅLEX";
    let collected = [];

    function drawHeart(x, y) {
      ctx.fillStyle = "#ff3366";
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.bezierCurveTo(x, y - 15, x - 25, y - 15, x - 25, y);
      ctx.bezierCurveTo(x - 25, y + 15, x, y + 30, x, y + 40);
      ctx.bezierCurveTo(x, y + 30, x + 25, y + 15, x + 25, y);
      ctx.bezierCurveTo(x + 25, y - 15, x, y - 15, x, y);
      ctx.fill();
    }

    function drawBullet(b) {
      ctx.fillStyle = "#ff6699";
      ctx.beginPath();
      ctx.arc(b.x, b.y, 10, 0, Math.PI * 2);
      ctx.fill();
    }

    function drawLetter(l) {
      ctx.fillStyle = "#fff";
      ctx.beginPath();
      ctx.arc(l.x, l.y, 25, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = "#000";
      ctx.font = "20px sans-serif";
      ctx.textAlign = "center";
      ctx.fillText(l.char, l.x, l.y + 7);
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (keys.left) player.x -= 4;
      if (keys.right) player.x += 4;
      if (keys.up) player.vy = -4;
      player.vy += 0.2;
      player.y += player.vy;

      player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));
      player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));

      drawHeart(player.x, player.y);

      bullets.forEach((b, i) => {
        b.y -= 5;
        drawBullet(b);
        if (b.y < 0) bullets.splice(i, 1);
      });

      letters.forEach((l, i) => {
        l.y += 2;
        drawLetter(l);
        bullets.forEach((b, j) => {
          const dx = l.x - b.x;
          const dy = l.y - b.y;
          if (dx * dx + dy * dy < 900) {
            bullets.splice(j, 1);
            letters.splice(i, 1);
            if (needed[collected.length] === l.char) {
              collected.push(l.char);
              score += 10;
            } else {
              collected.pop();
              score = Math.max(0, score - 5);
            }
            updateScore();
          }
        });
      });

      if (Math.random() < 0.03) {
        const pool = ["A", "B", "C", "L", "E", "X", "M", "N", "O", "U"];
        let possible = needed[collected.length] || pool[Math.floor(Math.random()*pool.length)];
        if (Math.random() < 0.7) possible = needed[collected.length];
        letters.push({ x: Math.random() * canvas.width, y: -30, char: possible });
      }

      requestAnimationFrame(update);
    }

    function updateScore() {
      document.getElementById("letters").textContent = needed.split('').map((l, i) => collected[i] || "_").join(" ");
      document.getElementById("scoreboard").innerHTML = `Puntos: ${score} | Letras: <span id="letters">${document.getElementById("letters").textContent}</span>`;
    }

    document.getElementById("left").ontouchstart = () => keys.left = true;
    document.getElementById("left").ontouchend = () => keys.left = false;
    document.getElementById("right").ontouchstart = () => keys.right = true;
    document.getElementById("right").ontouchend = () => keys.right = false;
    document.getElementById("up").ontouchstart = () => keys.up = true;
    document.getElementById("up").ontouchend = () => keys.up = false;
    document.getElementById("shoot").ontouchstart = () => bullets.push({ x: player.x, y: player.y });

    update();
  </script></body>
</html>
